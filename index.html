<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Us</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>❤️</text></svg>">
    <style>
        :root {
            --primary-color: #db2777;
            --secondary-bg: #fdf2f8;
            --card-bg: #ffffff;
            --text-dark: #334155;
            --text-light: #64748b;
            --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--secondary-bg);
            color: var(--text-dark);
            line-height: 1.6;
        }
        .font-playfair {
            font-family: 'Playfair Display', serif;
        }
        .card {
            background-color: var(--card-bg);
            border-radius: 1rem;
            box-shadow: var(--shadow-light);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
        }
        .timer-box {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.2s ease-in-out;
            border: 1px solid #db2777;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .timer-box.compact {
            padding: 0.75rem 0.5rem;
        }
        .timer-box .compact-value {
            font-size: 2rem;
        }
        .timer-box .compact-label {
            font-size: 0.8rem;
        }

        .timer-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }
        .timer-label {
            font-size: 0.9rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.25rem;
        }
        .heart-icon {
            animation: beat 1.5s infinite;
            display: inline-block;
        }
        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        
        .timeline-container {
            position: relative;
            padding-left: 1.5rem;
        }

        .timeline-line {
            position: absolute;
            left: 0.75rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: var(--primary-color);
        }

        .moving-timeline-dot {
            position: absolute;
            left: calc(0.75rem - 0.75rem);
            height: 1.5rem;
            width: 1.5rem;
            border-radius: 9999px;
            background-color: var(--primary-color);
            border: 4px solid var(--card-bg);
            z-index: 10;
            transition: top 0.2s ease-out, transform 0.2s ease-out;
            transform: scale(1);
        }
        .moving-timeline-dot.active-pulse {
            animation: dotPulse 1s ease-out;
        }
        @keyframes dotPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(219, 39, 119, 0.7); }
            70% { transform: scale(1.2); box-shadow: 0 0 0 10px rgba(219, 39, 119, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(219, 39, 119, 0); }
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
            padding-left: 2.5rem;
        }
        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-content {
            opacity: 0.6;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out, font-size 0.3s ease-in-out;
            transform: translateY(0);
            background-color: var(--card-bg);
            border-radius: 0.75rem;
            padding: 1.25rem;
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(0,0,0,0.03);
        }
        .timeline-content p {
            color: var(--text-light);
        }

        .timeline-content.active {
            opacity: 1;
            font-weight: 500;
            transform: translateY(-8px);
            font-size: 1.05em;
            box-shadow: var(--shadow-hover);
            border-color: rgba(219, 39, 119, 0.2);
        }
        .timeline-content.active .font-semibold {
            font-weight: 600;
            color: var(--primary-color);
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.3s ease-in-out;
        }
        .card:hover img {
            transform: scale(1.05);
        }

        .hero-header {
            position: relative;
            overflow: hidden;
            background-image: url('./Img/hero-bg.jpg');
            background-size: cover;
            background-position: center;
        }
        .hero-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(219, 39, 119, 0.85), rgba(255, 105, 180, 0.75));
            z-index: 1;
            transform: skewY(-2deg);
            transform-origin: top left;
        }
        .hero-content {
            position: relative;
            z-index: 2;
        }
        .hero-content .rounded-2xl {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-content-wrapper {
            max-width: 90%;
            max-height: 90vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #modalImage {
            transition: transform 0.3s ease-in-out;
            transform: scale(0.8);
        }
        #imageModal.active #modalImage {
            transform: scale(1);
        }
        #imageModal.closing #modalImage {
            transform: scale(0.8);
        }

        #imageModal {
            opacity: 0;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            visibility: hidden;
        }
        #imageModal.active {
            opacity: 1;
            visibility: visible;
        }

        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
            will-change: opacity, transform;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

    </style>
</head>
<body class="bg-[var(--secondary-bg)] text-[var(--text-dark)]">

    <header class="hero-header text-center py-16 px-4">
        <div class="hero-content relative bg-white bg-opacity-10 p-10 rounded-2xl inline-block backdrop-blur-sm">
            <h1 class="font-playfair text-5xl md:text-7xl text-white font-bold drop-shadow-lg">Nir & Ziya</h1>
            <p class="mt-4 text-lg md:text-xl text-pink-100 drop-shadow">Celebrating a Journey of Love</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12">

        <section id="countdown" class="mb-16 fade-in-section">
            <div class="card p-6 md:p-10 max-w-4xl mx-auto">
                <h2 class="font-playfair text-3xl md:text-4xl text-center font-bold text-[var(--primary-color)] mb-8">Together For...</h2>
                <div id="timer" class="grid grid-cols-2 sm:grid-cols-4 gap-4 md:gap-8 text-center">
                </div>
                <div class="text-center mt-6">
                    <p class="text-[var(--text-light)]">Our special day: <span id="anniversaryDate" class="font-semibold text-[var(--primary-color)]"></span></p>
                </div>
            </div>
        </section>

        <section id="story" class="mb-16 fade-in-section">
            <div class="card p-6 md:p-10">
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2">
                        <h2 class="font-playfair text-3xl md:text-4xl font-bold text-[var(--primary-color)] mb-4">Our Story</h2>
                        <p class="text-[var(--text-light)] leading-relaxed mb-4">It feels like just yesterday we started this incredible journey. From our first meet, to nervous laughter and endless conversation, to today, our bond has only grown stronger. We've built a life full of love, adventure, and countless cherished memories.</p>
                        <p class="text-[var(--text-light)] leading-relaxed">We have shared so many beautiful moments together, and I cherish each one of them. I have grown so much as a person because of you. I hope I have given you happiness and the love you deserve</p>
                    </div>
                    <div class="md:w-1/2 card p-2 h-80 flex-shrink-0">
                        <img src="./Img/0.png" alt="A happy couple" class="rounded-xl shadow-lg w-full h-full">
                    </div>
                </div>
            </div>
        </section>

        <section id="timeline" class="mb-16 fade-in-section">
            <div class="card p-6 md:p-10 max-w-6xl mx-auto">
                <h2 class="font-playfair text-3xl md:text-4xl text-center font-bold text-[var(--primary-color)] mb-8">A Timeline of Our Journey</h2>
                <div class="timeline-container">
                    <div class="timeline-line"></div>
                    <div id="movingDot" class="moving-timeline-dot"></div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">August 2024 - How We Met</p>
                            <p class="text-[var(--text-light)]">
                                A chance encounter on VirelApp brought two very different worlds together. You were new, I was familiar with the place — and fate introduced us in the simplest way. We didn’t know then how special it would all become. That day, we were just two slightly clueless souls, unknowingly meeting someone unforgettable.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">September 2024 - Movies and Late Night Talks</p>
                            <p class="text-[var(--text-light)]">
                                We started connecting over our shared love for anime and shows. You took my teasing in stride, and even when I gave you a hard time about Arima, we always ended up laughing. Slowly, playfulness turned into comfort.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">October 2024 - Finding Connection</p>
                            <p class="text-[var(--text-light)]">
                                Countless nights spent watching horror movies, sharing stories, and laughing together created a beautiful spark. Our conversations flowed effortlessly, and our connection grew deeper. Even when I worried if I belonged in your world, I knew I had found someone truly special.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">November 2024 - The Beginning</p>
                            <p class="text-[var(--text-light)]">
                                A beautiful moment changed everything. Our playful banter turned into something more, something real. I still cringe thinking about the message I sent — the one you lovingly tease me about. I fell sick on your birthday and couldn’t stay awake to wish you, though I tried with all my heart. The first month brought joy, wonder, and a touch of uncertainty — but mostly, it brought *us*.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">December 2024 - Quiet Growth</p>
                            <p class="text-[var(--text-light)]">
                                We slowed down and took the time to understand each other. We shared our dreams and fears, discovering how beautifully our lives could align. Though I still had questions about the future, one thing was clear — I wanted you in it.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">January 2025 - Apart but Together</p>
                            <p class="text-[var(--text-light)]">
                                Life took us on different paths for a while, and being away from you was harder than I imagined. But we held on — knowing the distance was just a moment, and our bond was stronger than the miles between us.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">February 2025 - A Valentine We Won’t Forget</p>
                            <p class="text-[var(--text-light)]">
                                Love was in the air, but so were misunderstandings. We stumbled a little, misread each other, and things got messy. Still, I sent you a rose and chocolates, hoping to make it right. Even when the valentines' gifts went missing, I knew that the real gift was us learning to hold each other through tough times.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">March 2025 - Weathering Storms</p>
                            <p class="text-[var(--text-light)]">
                                We had our first big fight, and it wasn’t easy. But through tears and silence, we realized something powerful: we were both willing to try. I’ll never forget how tenderly you kept that rose, or how meaningful the small gestures became. I learned to support you during your toughest days — with snacks, chocolates, and a quiet kind of love.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">April 2025 - Healing</p>
                            <p class="text-[var(--text-light)]">
                                After the emotional waves, came still waters. We focused on rebuilding, on forgiving, on appreciating what we had. Your birthday gift — just a picture of us — said more than words ever could. It reminded me how much love can be held in a single moment.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">May 2025 - Learning and Loving</p>
                            <p class="text-[var(--text-light)]">
                                We grew — not just together, but within ourselves. I surprised you with roses, and later that day we faced something painful. It was a hard moment, and it tested our trust. But we chose honesty. You surprised me again by telling the world about us, and it showed me you cared. We were learning to be better, together.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">June 2025 - Simple Joys</p>
                            <p class="text-[var(--text-light)]">
                                Life got busy, but love stayed quiet and constant. We found joy in everyday things — shared meals, peaceful evenings, just being close. We learned that sometimes, love lives in the smallest, calmest moments.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">July 2025 - The Month of Love</p>
                            <p class="text-[var(--text-light)]">
                                You surprised me with a thoughtful gift, and your heartfelt letters meant the world to me. Every little trinket you gave, I will cherish forever. Your love made this month truly unforgettable.
                            </p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-content">
                            <p class="font-semibold text-[var(--primary-color)] mb-1">August 2025 - Looking Ahead</p>
                            <p class="text-[var(--text-light)]">
                                As we dream about tomorrow, I feel nothing but hope. I’ve discovered so much about myself and us. You’ve helped me grow, and I hope I’ve done the same for you. I love you deeply — and I can’t wait to write the next chapters of our beautiful story, together.
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <section id="playlist" class="mb-16 fade-in-section">
            <div class="card p-6 md:p-10 max-w-4xl mx-auto">
                <h2 class="font-playfair text-3xl md:text-4xl text-center font-bold text-[var(--primary-color)] mb-8">Our Playlist</h2>
                <p class="text-center text-[var(--text-light)] mb-6">The soundtrack to our love story.</p>
                <div class="aspect-w-16 aspect-h-9 w-full">
                    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/5HLJarDKVDBOYdcTR8XDok?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                    </div>
            </div>
        </section>

        <section id="gallery" class="mb-16 fade-in-section">
               <h2 class="font-playfair text-3xl md:text-4xl text-center font-bold text-[var(--primary-color)] mb-8">Our Memories</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="card p-2">
                    <img src="./Img/1.jpg" alt="Memory 1" class="rounded-xl">
                </div>
                <div class="card p-2">
                    <img src="./Img/2.jpg" alt="Memory 2" class="rounded-xl">
                </div>
                <div class="card p-2">
                    <img src="./Img/3.jpg" alt="Memory 3" class="rounded-xl">
                </div>
                <div class="card p-2">
                    <img src="./Img/4.png" alt="Memory 4" class="rounded-xl">
                </div>
                <div class="card p-2 hidden md:block">
                    <img src="./Img/5.jpg" alt="Memory 5" class="rounded-xl">
                </div>
                <div class="card p-2 hidden md:block">
                    <img src="./Img/6.jpg" alt="Memory 6" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/7.jpg" alt="Memory 7" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/8.jpg" alt="Memory 8" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/9.jpg" alt="Memory 9" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/10.jpg" alt="Memory 10" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/11.jpg" alt="Memory 11" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/12.jpg" alt="Memory 12" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/13.jpg" alt="Memory 13" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/14.jpg" alt="Memory 14" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/15.jpg" alt="Memory 15" class="rounded-xl">
                </div>
                <div class="card p-2 hidden lg:block">
                    <img src="./Img/16.png" alt="Memory 16" class="rounded-xl">
                </div>
            </div>
        </section>

        <section id="message" class="fade-in-section">
               <div class="card p-6 md:p-10 max-w-4xl mx-auto text-center">
                   <div class="heart-icon text-[var(--primary-color)] text-4xl mb-4">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" viewBox="0 0 20 20" fill="currentColor">
                           <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
                       </svg>
                   </div>
                   <h2 class="font-playfair text-3xl md:text-4xl font-bold text-[var(--primary-color)] mb-4">A Note To My Love</h2>
                   <p class="text-[var(--text-light)] leading-relaxed text-lg">
                       "My dearest, with you, every day is a celebration.<br> Thank you for being <i><b>my cucu, my cute bubu, and my love</b></i>.<br> I love you more than words can say. Here's to our future!"
                   </p>
               </div>
        </section>

    </main>

    <!-- <footer class="text-center py-8 mt-12 bg-white rounded-t-3xl shadow-inner"> -->
    <footer class="text-center py-8 mt-12 bg-white">
        <p class="text-[var(--text-light)]">Made with love, for my love.</p>
        <p class="text-[var(--text-light)] text-sm">© <span id="footerYear">2024</span> Nir & Ziya</p>
    </footer>

    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50">
        <span class="absolute top-4 right-4 text-white text-5xl cursor-pointer hover:scale-110 transition-transform duration-200" id="closeModal">×</span>
        <div class="modal-content-wrapper">
             <img src="" alt="Enlarged Memory" id="modalImage" class="max-w-[90%] max-h-[90vh] object-contain rounded-lg shadow-lg">
        </div>
    </div>

    <script>
        const anniversary = new Date(2024, 10, 1);

        function updateCountdown() {
            const now = new Date();
            let diff = now - anniversary;

            let years = now.getFullYear() - anniversary.getFullYear();
            let months = now.getMonth() - anniversary.getMonth();
            let days = now.getDate() - anniversary.getDate();

            if (days < 0) {
                months--;
                const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0);
                days += prevMonth.getDate();
            }

            if (months < 0) {
                years--;
                months += 12;
            }
            
            const secondsInDay = 1000 * 60 * 60 * 24;
            const remainingDiffAfterDays = diff % secondsInDay;

            const hours = Math.floor(remainingDiffAfterDays / (1000 * 60 * 60));
            const minutes = Math.floor((remainingDiffAfterDays % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((remainingDiffAfterDays % (1000 * 60)) / 1000);


            const timerElement = document.getElementById('timer');
            if(timerElement){
                timerElement.innerHTML = `
                    <div class="timer-box compact">
                        <div class="timer-value compact-value">${years}</div>
                        <div class="timer-label compact-label">Years</div>
                    </div>
                    <div class="timer-box compact">
                        <div class="timer-value compact-value">${months}</div>
                        <div class="timer-label compact-label">Months</div>
                    </div>
                    <div class="timer-box compact">
                        <div class="timer-value compact-value">${days}</div>
                        <div class="timer-label compact-label">Days</div>
                    </div>
                    <div class="timer-box">
                        <div class="flex flex-col w-full px-1 sm:px-2">
                            <div class="flex justify-around items-baseline w-full">
                                <div class="timer-value text-xl sm:text-2xl">${String(hours).padStart(2, '0')}</div>
                                <div class="timer-value text-xl sm:text-2xl">:</div>
                                <div class="timer-value text-xl sm:text-2xl">${String(minutes).padStart(2, '0')}</div>
                                <div class="timer-value text-xl sm:text-2xl">:</div>
                                <div class="timer-value text-xl sm:text-2xl">${String(seconds).padStart(2, '0')}</div>
                            </div>
                            <div class="flex justify-around items-center w-full mt-1">
                                <div class="timer-label text-[0.55rem] sm:text-xs">Hours</div>
                                <div class="w-1 sm:w-2"></div>
                                <div class="timer-label text-[0.55rem] sm:text-xs">Mins</div>
                                <div class="w-1 sm:w-2"></div>
                                <div class="timer-label text-[0.55rem] sm:text-xs">Secs</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const anniversaryDateEl = document.getElementById('anniversaryDate');
            if(anniversaryDateEl){
                anniversaryDateEl.textContent = anniversary.toLocaleDateString('en-US', {
                    year: 'numeric', month: 'long', day: 'numeric'
                });
            }

            const yearEl = document.getElementById('footerYear');
            if(yearEl){
                yearEl.textContent = new Date().getFullYear();
            }

            updateCountdown();
            setInterval(updateCountdown, 1000);

            const galleryImages = document.querySelectorAll('#gallery .card img, #story .card img');
            const imageModal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const closeModal = document.getElementById('closeModal');

            galleryImages.forEach(image => {
                image.style.cursor = 'pointer';
                image.addEventListener('click', () => {
                    modalImage.src = image.src;
                    imageModal.classList.remove('closing');
                    imageModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });

            const hideModal = () => {
                imageModal.classList.add('closing');
                modalImage.addEventListener('transitionend', function handler() {
                    imageModal.classList.remove('active');
                    imageModal.classList.remove('closing');
                    document.body.style.overflow = '';
                    modalImage.removeEventListener('transitionend', handler);
                }, { once: true });
            };

            closeModal.addEventListener('click', hideModal);
            imageModal.addEventListener('click', (e) => {
                if (e.target === imageModal) {
                    hideModal();
                }
            });

            const timelineContainer = document.querySelector('.timeline-container');
            const timelineItems = document.querySelectorAll('.timeline-item');
            const movingDot = document.getElementById('movingDot');
            const timelineLine = document.querySelector('.timeline-line');

            function updateTimelineDot() {
                if (!timelineContainer || !movingDot || timelineItems.length === 0) {
                    return;
                }

                const containerRect = timelineContainer.getBoundingClientRect();
                const viewportCenter = window.innerHeight / 2;

                let activeItem = null;
                let activeItemContentCenterY = 0;

                timelineItems.forEach((item, index) => {
                    const content = item.querySelector('.timeline-content');
                    if (!content) return;

                    const contentRect = content.getBoundingClientRect();
                    const contentCenterY = contentRect.top + contentRect.height / 2;

                    const activationThreshold = window.innerHeight * 0.25;

                    if (contentRect.top < viewportCenter + activationThreshold && contentRect.bottom > viewportCenter - activationThreshold) {
                        if (!activeItem || Math.abs(contentCenterY - viewportCenter) < Math.abs(activeItemContentCenterY - viewportCenter)) {
                            activeItem = item;
                            activeItemContentCenterY = contentCenterY;
                        }
                    }
                });

                timelineItems.forEach(item => {
                    const content = item.querySelector('.timeline-content');
                    if (content) {
                        if (item === activeItem) {
                            content.classList.add('active');
                        } else {
                            content.classList.remove('active');
                        }
                    }
                });

                if (activeItem) {
                    const activeContent = activeItem.querySelector('.timeline-content');
                    const activeContentRect = activeContent.getBoundingClientRect();
                    
                    const dotTop = (activeContentRect.top + activeContentRect.height / 2) - containerRect.top - (movingDot.offsetHeight / 2);
                    
                    const minTop = 0;
                    const maxTop = timelineLine.offsetHeight - movingDot.offsetHeight;
                    
                    const newDotTop = Math.max(minTop, Math.min(dotTop, maxTop));
                    
                    const currentDotTop = parseFloat(movingDot.style.top || '0');
                    if (Math.abs(currentDotTop - newDotTop) > 5) {
                        movingDot.classList.add('active-pulse');
                        setTimeout(() => movingDot.classList.remove('active-pulse'), 1000);
                    }

                    movingDot.style.top = `${newDotTop}px`;

                } else {
                    const firstItemContent = timelineItems[0].querySelector('.timeline-content');
                    const lastItemContent = timelineItems[timelineItems.length - 1].querySelector('.timeline-content');
                    
                    if (firstItemContent && lastItemContent) {
                        const firstContentRect = firstItemContent.getBoundingClientRect();
                        const lastContentRect = lastItemContent.getBoundingClientRect();

                        if (window.scrollY < firstContentRect.top + window.scrollY - (window.innerHeight / 2)) {
                            movingDot.style.top = '0px';
                        } else if (window.scrollY > lastContentRect.bottom + window.scrollY - (window.innerHeight / 2)) {
                            movingDot.style.top = `${timelineLine.offsetHeight - movingDot.offsetHeight}px`;
                        }
                    }
                }
            }

            const debounce = (func, delay) => {
                let timeout;
                return function(...args) {
                    const context = this;
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(context, args), delay);
                };
            };

            const debouncedUpdateTimelineDot = debounce(updateTimelineDot, 10);

            updateTimelineDot();
            window.addEventListener('scroll', debouncedUpdateTimelineDot);
            window.addEventListener('resize', debouncedUpdateTimelineDot);

            const fadeInSections = document.querySelectorAll('.fade-in-section');

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            fadeInSections.forEach(section => {
                observer.observe(section);
            });
        });

    </script>
</body>
</html>
